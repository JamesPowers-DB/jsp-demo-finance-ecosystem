{
  "datasets": [
    {
      "name": "4bd0cae7",
      "displayName": "KPI: Current Planning Metrics",
      "queryLines": [
        "SELECT \n",
        "  fiscal_quarter\n",
        "  ,fiscal_year\n",
        "  ,fiscal_quarter_name\n",
        "  ,cost_center\n",
        "  ,legal_entity\n",
        "  ,MEASURE(total_budget) AS total_budget \n",
        "  ,MEASURE(total_forecast) AS total_forecast\n",
        "  ,MEASURE(total_actual) AS total_actual\n",
        "  ,MEASURE(budget_variance) AS total_variance\n",
        "  ,MEASURE(forecast_accuracy) AS forecast_accuracy\n",
        "  ,MEASURE(budget_utilization) AS budget_utilization\n",
        "FROM main.finance_lakehouse.metrics_planning \n",
        "WHERE fiscal_quarter_name = 'FY2025Q3'\n",
        "GROUP BY ALL"
      ]
    },
    {
      "name": "ds_kpi_variance_ytd",
      "displayName": "KPI: Planning Metrics",
      "queryLines": [
        "SELECT \n",
        "  fiscal_quarter\n",
        "  ,fiscal_year\n",
        "  ,fiscal_quarter_name\n",
        "  ,cost_center\n",
        "  ,legal_entity\n",
        "  ,MEASURE(total_budget) AS total_budget \n",
        "  ,MEASURE(total_forecast) AS total_forecast\n",
        "  ,MEASURE(total_actual) AS total_actual\n",
        "  ,MEASURE(budget_variance) AS total_variance\n",
        "  ,MEASURE(forecast_accuracy) AS forecast_accuracy\n",
        "  ,MEASURE(budget_utilization) AS budget_utilization\n",
        "FROM main.finance_lakehouse.metrics_planning \n",
        "GROUP BY ALL"
      ]
    },
    {
      "name": "750c65bd",
      "displayName": "Data: Current Actuals",
      "queryLines": [
        "SELECT \n",
        "  fiscal_quarter\n",
        "  ,fiscal_year\n",
        "  ,fiscal_quarter_name\n",
        "  ,SUM(actual_amount) AS total_actual\n",
        "  ,SUM(spend_amount) AS total_spend\n",
        "  ,SUM(salary_amount) AS total_salary\n",
        "  ,SUM(salary_amount) / SUM(actual_amount) AS headcount_percentage\n",
        "FROM main.finance_lakehouse.fact_fpa_actuals\n",
        "WHERE fiscal_quarter_name = 'FY2025Q3'\n",
        "GROUP BY ALL "
      ]
    },
    {
      "name": "ee443030",
      "displayName": "Data: Trending Actuals",
      "queryLines": [
        "SELECT \n",
        "  fiscal_quarter\n",
        "  ,fiscal_year\n",
        "  ,fiscal_quarter_name\n",
        "  ,cost_center_name\n",
        "  ,legal_entity_name\n",
        "  ,SUM(actual_amount) AS total_actual\n",
        "  ,SUM(spend_amount) AS total_spend\n",
        "  ,SUM(salary_amount) AS total_salary\n",
        "FROM main.finance_lakehouse.fact_fpa_actuals\n",
        "GROUP BY ALL "
      ]
    },
    {
      "name": "e08f3bac",
      "displayName": "Table: stg_spend_transactions",
      "queryLines": [
        "SELECT\n",
        "  --Purchase Order Data\n",
        "  purchase_order_id\n",
        "  ,purchase_order_amount\n",
        "  ,supplier_name\n",
        "  ,purchase_order_status\n",
        "  ,DATE(FROM_UNIXTIME(purchase_order_date)) AS purchase_order_date\n",
        "  ,YEAR(FROM_UNIXTIME(purchase_order_date)) AS purchase_year\n",
        "  ,DATE(FROM_UNIXTIME(goods_received_date)) AS goods_received_date\n",
        "  ,coa_meta.legal_entity_name\n",
        "  ,coa_meta.cost_center_name\n",
        "  \n",
        "  --Contract Data\n",
        "  ,contract_id IS NOT NULL AS is_spend_contracted\n",
        "  \n",
        "  --Invoice Data\n",
        "  ,invoice_id\n",
        "  ,invoice_status\n",
        "  ,invoice_amount\n",
        "  ,invoice_category\n",
        "  ,tax_amount\n",
        "  ,discount_amount\n",
        "  ,discount_amount / invoice_amount AS discount_percentage\n",
        "  ,(payment_date <= payment_due_date) AS is_on_time_payment\n",
        "  ,DATE_TRUNC('quarter', FROM_UNIXTIME(invoice_date)) = DATE_TRUNC('quarter', FROM_UNIXTIME(payment_date)) AS linear_payment\n",
        "  ,DATE_DIFF(DAY, FROM_UNIXTIME(invoice_date), FROM_UNIXTIME(payment_date)) AS days_to_payment\n",
        "  ,DATE(FROM_UNIXTIME(invoice_date)) AS invoice_date\n",
        "  ,YEAR(DATE(FROM_UNIXTIME(invoice_date))) AS invoice_year\n",
        "  ,DATE(FROM_UNIXTIME(payment_due_date)) AS payment_due_date\n",
        "  ,DATE(FROM_UNIXTIME(payment_date)) AS payment_date\n",
        "  ,DATE_TRUNC('quarter', FROM_UNIXTIME(payment_date)) AS payment_quarter\n",
        "  \n",
        "FROM main.finance_lakehouse.stg_spend_transactions\n"
      ]
    },
    {
      "name": "4273b056",
      "displayName": "Current AP Balance",
      "queryLines": [
        "SELECT SUM(credit_balance) AS total_ap_balance \n",
        "FROM main.finance_lakehouse.fact_gl_trial_balances \n",
        "WHERE account_name = 'Accounts Payable' \n",
        "AND as_of_date = (SELECT MAX(as_of_date) FROM main.finance_lakehouse.fact_gl_trial_balances)"
      ]
    },
    {
      "name": "df3fcb4a",
      "displayName": "Active Supplier Count",
      "queryLines": [
        "SELECT COUNT(DISTINCT third_party_name) AS supplier_count \n",
        "FROM main.finance_lakehouse.fact_gl_entries \n",
        "WHERE account_name = 'Accounts Payable' AND gl_date >= DATE_SUB(CURRENT_DATE(), 90)"
      ]
    },
    {
      "name": "6232aeab",
      "displayName": "AP Payments Last 30 Days",
      "queryLines": [
        "SELECT SUM(debit_amount) AS total_payments \n",
        "FROM main.finance_lakehouse.fact_gl_entries \n",
        "WHERE account_name = 'Accounts Payable' \n",
        "    AND debit_amount > 0 \n",
        "    AND gl_date >= DATE_SUB(CURRENT_DATE(), 30)"
      ]
    },
    {
      "name": "940a615f",
      "displayName": "Data: AP Balance Trend",
      "queryLines": [
        "WITH base AS (\n",
        "  SELECT \n",
        "    as_of_date\n",
        "    ,legal_entity_name\n",
        "    ,cost_center_name\n",
        "    ,third_party_name\n",
        "    ,SUM(credit_balance) AS ap_balance\n",
        "  FROM main.finance_lakehouse.fact_gl_trial_balances \n",
        "  WHERE account_name = 'Accounts Payable' \n",
        "  GROUP BY ALL\n",
        "), prep AS (\n",
        "  SELECT \n",
        "    as_of_date\n",
        "    ,legal_entity_name\n",
        "    ,cost_center_name\n",
        "    ,third_party_name\n",
        "    ,ap_balance\n",
        "    ,LAG(ap_balance) OVER (\n",
        "        PARTITION BY \n",
        "          legal_entity_name\n",
        "          ,cost_center_name\n",
        "          ,third_party_name\n",
        "        ORDER BY \n",
        "          as_of_date \n",
        "        ) AS prev_ap_balance\n",
        "  FROM base\n",
        ")\n",
        "SELECT\n",
        "  as_of_date\n",
        "  ,legal_entity_name\n",
        "  ,cost_center_name\n",
        "  ,third_party_name\n",
        "  ,ap_balance\n",
        "  ,prev_ap_balance\n",
        "  ,(ap_balance - prev_ap_balance) AS flux\n",
        "  ,(ap_balance - prev_ap_balance) / prev_ap_balance AS flux_percent\n",
        "FROM prep\n",
        "WHERE prev_ap_balance IS NOT NULL"
      ]
    }
  ],
  "pages": [
    {
      "name": "planning_analytics",
      "displayName": "Financial Planning Analytics",
      "layout": [
        {
          "widget": {
            "name": "header_intro",
            "multilineTextboxSpec": {
              "lines": [
                "# Financial Planning Analytics: Budget vs Actuals vs Forecast\n",
                "This dashboard provides comprehensive analysis of planning variances across budgets, forecasts, and actuals. Use the filters on the left to drill down by legal entity, cost center, and time period. Key metrics show year-to-date 2025 performance with variance analysis to identify over/under budget areas.\n"
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 0,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "kpi_actuals_ytd",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "4bd0cae7",
                  "fields": [
                    {
                      "name": "sum(total_actual)",
                      "expression": "SUM(`total_actual`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "sum(total_actual)",
                  "format": {
                    "type": "number-currency",
                    "currencyCode": "USD",
                    "abbreviation": "compact",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 2
                    }
                  },
                  "displayName": "Total Actuals YTD ($)"
                }
              },
              "frame": {
                "title": "Recent Full Quarter Actuals ($)",
                "showTitle": true,
                "showDescription": true,
                "description": "Sum of Current Quarter"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 2,
            "width": 2,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "kpi_budget_ytd",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "4bd0cae7",
                  "fields": [
                    {
                      "name": "sum(total_budget)",
                      "expression": "SUM(`total_budget`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "sum(total_budget)",
                  "format": {
                    "type": "number-currency",
                    "currencyCode": "USD",
                    "abbreviation": "compact",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 2
                    }
                  },
                  "displayName": "Total Budget YTD ($)"
                }
              },
              "frame": {
                "title": "Recent Full Quarter Budget ($)",
                "showTitle": true,
                "showDescription": true,
                "description": "Sum of Recent Full quarter (FY2025 Q3) budgeted amounts."
              }
            }
          },
          "position": {
            "x": 2,
            "y": 2,
            "width": 2,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "kpi_forecast_ytd",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "4bd0cae7",
                  "fields": [
                    {
                      "name": "sum(total_forecast)",
                      "expression": "SUM(`total_forecast`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "sum(total_forecast)",
                  "format": {
                    "type": "number-currency",
                    "currencyCode": "USD",
                    "abbreviation": "compact",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 2
                    }
                  },
                  "displayName": "Total Forecast YTD ($)"
                }
              },
              "frame": {
                "title": "Recent Full Forecast YTD ($)",
                "showTitle": true,
                "showDescription": true,
                "description": "Sum of the Recent Full quarter (FY2025 Q3) forecasted amounts."
              }
            }
          },
          "position": {
            "x": 4,
            "y": 2,
            "width": 2,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "kpi_variance_ytd",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "4bd0cae7",
                  "fields": [
                    {
                      "name": "sum(total_variance)",
                      "expression": "SUM(`total_variance`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "sum(total_variance)",
                  "format": {
                    "type": "number-currency",
                    "currencyCode": "USD",
                    "abbreviation": "compact",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 2
                    }
                  }
                }
              },
              "frame": {
                "title": "Budget Variance YTD ($)",
                "showTitle": true,
                "showDescription": true,
                "description": "Variance between budget and actuals for the Recent Full quarter. Positive means under budget, negative means over. budget."
              }
            }
          },
          "position": {
            "x": 0,
            "y": 5,
            "width": 2,
            "height": 4
          }
        },
        {
          "widget": {
            "name": "section_trends_header",
            "multilineTextboxSpec": {
              "lines": [
                "## Planning Trends: Quarterly Analysis\n",
                "Compare budget, actuals, and forecasts across quarters to identify variance patterns and trends. Charts show spend vs revenue and forecast accuracy.\n"
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 13,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "line_planning_trends",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "ds_kpi_variance_ytd",
                  "fields": [
                    {
                      "name": "fiscal_quarter_name",
                      "expression": "`fiscal_quarter_name`"
                    },
                    {
                      "name": "sum(total_budget)",
                      "expression": "SUM(`total_budget`)"
                    },
                    {
                      "name": "sum(total_forecast)",
                      "expression": "SUM(`total_forecast`)"
                    },
                    {
                      "name": "sum(total_actual)",
                      "expression": "SUM(`total_actual`)"
                    }
                  ],
                  "filters": [
                    {
                      "expression": "`fiscal_quarter_name` IS NULL OR `fiscal_quarter_name` NOT IN ('FY2023Q1')"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "combo",
              "encodings": {
                "x": {
                  "fieldName": "fiscal_quarter_name",
                  "scale": {
                    "type": "categorical"
                  },
                  "displayName": "Quarter"
                },
                "y": {
                  "primary": {
                    "fields": [
                      {
                        "fieldName": "sum(total_budget)",
                        "displayName": "Budget"
                      },
                      {
                        "fieldName": "sum(total_forecast)",
                        "displayName": "Forecast"
                      }
                    ]
                  },
                  "secondary": {
                    "fields": [
                      {
                        "fieldName": "sum(total_actual)",
                        "displayName": "Actuals"
                      }
                    ]
                  },
                  "scale": {
                    "type": "quantitative"
                  }
                }
              },
              "frame": {
                "title": "Budget vs Actuals vs Forecast by Quarter",
                "showTitle": true,
                "description": "Quarterly trending showing budget, actuals, and forecast amounts. Use filters to drill down by legal entity or cost center.",
                "showDescription": true
              },
              "mark": {
                "colors": [
                  {
                    "themeColorType": "visualizationColors",
                    "position": 1
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 9
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 4
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 5
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 6
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 7
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 8
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 9
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 10
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 10
                  }
                ],
                "layout": "group"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 15,
            "width": 2,
            "height": 9
          }
        },
        {
          "widget": {
            "name": "bar_variance_by_entity",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "ds_kpi_variance_ytd",
                  "fields": [
                    {
                      "name": "legal_entity",
                      "expression": "`legal_entity`"
                    },
                    {
                      "name": "fiscal_quarter_name",
                      "expression": "`fiscal_quarter_name`"
                    },
                    {
                      "name": "avg(budget_utilization)",
                      "expression": "AVG(`budget_utilization`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "fiscal_quarter_name",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "y": {
                  "fieldName": "avg(budget_utilization)",
                  "scale": {
                    "type": "quantitative"
                  },
                  "format": {
                    "type": "number-percent",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 2
                    }
                  }
                },
                "color": {
                  "fieldName": "legal_entity",
                  "scale": {
                    "type": "categorical"
                  }
                }
              },
              "frame": {
                "title": "Budget Variance by Legal Entity",
                "showTitle": true,
                "description": "Variance between budget and actuals by legal entity. Positive bars indicate under budget (favorable), negative bars indicate over budget (unfavorable).",
                "showDescription": true
              },
              "annotations": [
                {
                  "type": "horizontal-line",
                  "encodings": {
                    "y": {
                      "dataValue": "1",
                      "dataType": "DECIMAL"
                    }
                  }
                }
              ],
              "mark": {
                "colors": [
                  {
                    "themeColorType": "visualizationColors",
                    "position": 4
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 2
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 3
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 4
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 5
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 6
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 7
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 8
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 9
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 10
                  }
                ]
              }
            }
          },
          "position": {
            "x": 2,
            "y": 15,
            "width": 4,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "line_forecast_accuracy",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "ds_kpi_variance_ytd",
                  "fields": [
                    {
                      "name": "legal_entity",
                      "expression": "`legal_entity`"
                    },
                    {
                      "name": "fiscal_quarter_name",
                      "expression": "`fiscal_quarter_name`"
                    },
                    {
                      "name": "avg(forecast_accuracy)",
                      "expression": "AVG(`forecast_accuracy`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "fiscal_quarter_name",
                  "scale": {
                    "type": "categorical"
                  },
                  "axis": {
                    "title": "Fiscal Quarter"
                  },
                  "displayName": "Quarter"
                },
                "y": {
                  "fieldName": "avg(forecast_accuracy)",
                  "scale": {
                    "type": "quantitative",
                    "fn": {
                      "type": "symlog"
                    }
                  },
                  "format": {
                    "type": "number-percent",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 0
                    }
                  }
                },
                "color": {
                  "fieldName": "legal_entity",
                  "scale": {
                    "type": "categorical"
                  }
                }
              },
              "frame": {
                "title": "Forecast Accuracy by Quarter",
                "showTitle": true,
                "description": "Measures forecast accuracy as percentage - 100% means perfect forecast, lower values indicate forecast variance from actuals."
              }
            }
          },
          "position": {
            "x": 2,
            "y": 20,
            "width": 4,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "section_details_header",
            "multilineTextboxSpec": {
              "lines": [
                "## Detailed Analysis: Trial Balance, Variance by Cost Center, and Commitments\n",
                "Drill into specific variances by cost center, review trial balance summary, and track committed amounts.\n"
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 25,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "table_variance_detail",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "ds_kpi_variance_ytd",
                  "fields": [
                    {
                      "name": "fiscal_quarter_name",
                      "expression": "`fiscal_quarter_name`"
                    },
                    {
                      "name": "legal_entity",
                      "expression": "`legal_entity`"
                    },
                    {
                      "name": "cost_center",
                      "expression": "`cost_center`"
                    },
                    {
                      "name": "sum(total_budget)",
                      "expression": "SUM(`total_budget`)"
                    },
                    {
                      "name": "sum(total_forecast)",
                      "expression": "SUM(`total_forecast`)"
                    },
                    {
                      "name": "sum(total_actual)",
                      "expression": "SUM(`total_actual`)"
                    },
                    {
                      "name": "avg(budget_utilization)",
                      "expression": "AVG(`budget_utilization`)"
                    },
                    {
                      "name": "avg(forecast_accuracy)",
                      "expression": "AVG(`forecast_accuracy`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "table",
              "encodings": {
                "columns": [
                  {
                    "fieldName": "fiscal_quarter_name"
                  },
                  {
                    "fieldName": "legal_entity"
                  },
                  {
                    "fieldName": "cost_center"
                  },
                  {
                    "fieldName": "sum(total_budget)",
                    "displayName": "Budget ($)"
                  },
                  {
                    "fieldName": "sum(total_forecast)",
                    "displayName": "Actual ($)"
                  },
                  {
                    "fieldName": "sum(total_actual)",
                    "displayName": "Variance ($)"
                  },
                  {
                    "fieldName": "avg(budget_utilization)",
                    "displayName": "Variance"
                  },
                  {
                    "fieldName": "avg(forecast_accuracy)",
                    "displayName": "Forecast Accuracy"
                  }
                ]
              },
              "frame": {
                "title": "Variance Detail by Cost Center",
                "showTitle": true,
                "description": "Detailed variance breakdown by cost center, legal entity, and quarter. Positive variance means under budget.",
                "showDescription": true
              }
            }
          },
          "position": {
            "x": 0,
            "y": 27,
            "width": 6,
            "height": 7
          }
        },
        {
          "widget": {
            "name": "263669ae",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "4bd0cae7",
                  "fields": [
                    {
                      "name": "avg(forecast_accuracy)",
                      "expression": "AVG(`forecast_accuracy`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "avg(forecast_accuracy)",
                  "format": {
                    "type": "number-percent",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 2
                    }
                  }
                }
              },
              "frame": {
                "title": "Current Quarter Forecast Accuracy (%)",
                "showTitle": true,
                "showDescription": true,
                "description": "Accuracy between actuals and the forecast for the Recent Full quarter. \nA percentage < 100% means lower actuals."
              }
            }
          },
          "position": {
            "x": 0,
            "y": 9,
            "width": 2,
            "height": 4
          }
        },
        {
          "widget": {
            "name": "0176784e",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "ds_kpi_variance_ytd",
                  "fields": [
                    {
                      "name": "sum(total_actual)",
                      "expression": "SUM(`total_actual`)"
                    },
                    {
                      "name": "sum(total_budget)",
                      "expression": "SUM(`total_budget`)"
                    },
                    {
                      "name": "fiscal_quarter_name",
                      "expression": "`fiscal_quarter_name`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "scale": {
                    "type": "quantitative"
                  },
                  "fields": [
                    {
                      "fieldName": "sum(total_actual)"
                    },
                    {
                      "fieldName": "sum(total_budget)"
                    }
                  ]
                },
                "y": {
                  "fieldName": "fiscal_quarter_name",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "label": {
                  "show": false
                }
              },
              "frame": {
                "title": "Actuals vs Budget by Cost Center",
                "showTitle": true,
                "showDescription": false
              },
              "mark": {
                "colors": [
                  {
                    "themeColorType": "visualizationColors",
                    "position": 1
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 6
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 4
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 5
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 6
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 7
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 8
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 9
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 10
                  }
                ],
                "layout": "group"
              }
            }
          },
          "position": {
            "x": 2,
            "y": 9,
            "width": 4,
            "height": 4
          }
        },
        {
          "widget": {
            "name": "af76888e",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "4bd0cae7",
                  "fields": [
                    {
                      "name": "sum(total_actual)",
                      "expression": "SUM(`total_actual`)"
                    },
                    {
                      "name": "sum(total_budget)",
                      "expression": "SUM(`total_budget`)"
                    },
                    {
                      "name": "legal_entity",
                      "expression": "`legal_entity`"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "scale": {
                    "type": "quantitative"
                  },
                  "fields": [
                    {
                      "fieldName": "sum(total_actual)"
                    },
                    {
                      "fieldName": "sum(total_budget)"
                    }
                  ]
                },
                "y": {
                  "fieldName": "legal_entity",
                  "scale": {
                    "type": "categorical",
                    "sort": {
                      "by": "x-reversed"
                    }
                  },
                  "displayName": "Legal Entity"
                },
                "label": {
                  "show": false
                }
              },
              "frame": {
                "title": "Actuals vs Budget by Legal Entity",
                "showTitle": true,
                "showDescription": false
              },
              "mark": {
                "colors": [
                  {
                    "themeColorType": "visualizationColors",
                    "position": 1
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 6
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 3
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 4
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 5
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 6
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 7
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 8
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 9
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 10
                  }
                ],
                "layout": "group"
              }
            }
          },
          "position": {
            "x": 2,
            "y": 5,
            "width": 4,
            "height": 4
          }
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "global_filters",
      "displayName": "Global Filters",
      "layout": [
        {
          "widget": {
            "name": "filter_legal_entity",
            "queries": [
              {
                "name": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0aed2c3fb166b9e579fc3378dca78_legal_entity",
                "query": {
                  "datasetName": "ds_kpi_variance_ytd",
                  "fields": [
                    {
                      "name": "legal_entity",
                      "expression": "`legal_entity`"
                    },
                    {
                      "name": "legal_entity_associativity",
                      "expression": "COUNT_IF(`associative_filter_predicate_group`)"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0af5bb3671303a7dfbc795e98cac6_legal_entity",
                "query": {
                  "datasetName": "4bd0cae7",
                  "fields": [
                    {
                      "name": "legal_entity",
                      "expression": "`legal_entity`"
                    },
                    {
                      "name": "legal_entity_associativity",
                      "expression": "COUNT_IF(`associative_filter_predicate_group`)"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0afce5107165c86112eb042ecf67d_cost_center_name",
                "query": {
                  "datasetName": "940a615f",
                  "fields": [
                    {
                      "name": "cost_center_name",
                      "expression": "`cost_center_name`"
                    },
                    {
                      "name": "cost_center_name_associativity",
                      "expression": "COUNT_IF(`associative_filter_predicate_group`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "filter-multi-select",
              "encodings": {
                "fields": [
                  {
                    "fieldName": "legal_entity",
                    "queryName": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0aed2c3fb166b9e579fc3378dca78_legal_entity"
                  },
                  {
                    "fieldName": "legal_entity",
                    "queryName": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0af5bb3671303a7dfbc795e98cac6_legal_entity"
                  },
                  {
                    "fieldName": "cost_center_name",
                    "queryName": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0afce5107165c86112eb042ecf67d_cost_center_name"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "showDescription": false,
                "title": "LEGAL ENTITY NAME"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 2,
            "width": 1,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "filter_cost_center",
            "queries": [
              {
                "name": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0af5bb3671303a7dfbc795e98cac6_cost_center",
                "query": {
                  "datasetName": "4bd0cae7",
                  "fields": [
                    {
                      "name": "cost_center",
                      "expression": "`cost_center`"
                    },
                    {
                      "name": "cost_center_associativity",
                      "expression": "COUNT_IF(`associative_filter_predicate_group`)"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0aed2c3fb166b9e579fc3378dca78_cost_center",
                "query": {
                  "datasetName": "ds_kpi_variance_ytd",
                  "fields": [
                    {
                      "name": "cost_center",
                      "expression": "`cost_center`"
                    },
                    {
                      "name": "cost_center_associativity",
                      "expression": "COUNT_IF(`associative_filter_predicate_group`)"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0afce5107165c86112eb042ecf67d_cost_center_name",
                "query": {
                  "datasetName": "940a615f",
                  "fields": [
                    {
                      "name": "cost_center_name",
                      "expression": "`cost_center_name`"
                    },
                    {
                      "name": "cost_center_name_associativity",
                      "expression": "COUNT_IF(`associative_filter_predicate_group`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "filter-multi-select",
              "encodings": {
                "fields": [
                  {
                    "fieldName": "cost_center",
                    "queryName": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0af5bb3671303a7dfbc795e98cac6_cost_center"
                  },
                  {
                    "fieldName": "cost_center",
                    "queryName": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0aed2c3fb166b9e579fc3378dca78_cost_center"
                  },
                  {
                    "fieldName": "cost_center_name",
                    "queryName": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0afce5107165c86112eb042ecf67d_cost_center_name"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "COST CENTER"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 4,
            "width": 1,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "eb59f3d4",
            "queries": [
              {
                "name": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0af962d8a1eb6aea1008062548a0c_supplier_name",
                "query": {
                  "datasetName": "e08f3bac",
                  "fields": [
                    {
                      "name": "supplier_name",
                      "expression": "`supplier_name`"
                    },
                    {
                      "name": "supplier_name_associativity",
                      "expression": "COUNT_IF(`associative_filter_predicate_group`)"
                    }
                  ],
                  "disaggregated": false
                }
              },
              {
                "name": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0afce5107165c86112eb042ecf67d_third_party_name",
                "query": {
                  "datasetName": "940a615f",
                  "fields": [
                    {
                      "name": "third_party_name",
                      "expression": "`third_party_name`"
                    },
                    {
                      "name": "third_party_name_associativity",
                      "expression": "COUNT_IF(`associative_filter_predicate_group`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "filter-single-select",
              "encodings": {
                "fields": [
                  {
                    "fieldName": "supplier_name",
                    "queryName": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0af962d8a1eb6aea1008062548a0c_supplier_name"
                  },
                  {
                    "fieldName": "third_party_name",
                    "queryName": "dashboards/01f0aed2c3fb1207b1a8aaf050a3fe33/datasets/01f0afce5107165c86112eb042ecf67d_third_party_name"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "THIRD PARTY NAME"
              }
            }
          },
          "position": {
            "x": 0,
            "y": 6,
            "width": 1,
            "height": 2
          }
        }
      ],
      "pageType": "PAGE_TYPE_GLOBAL_FILTERS"
    },
    {
      "name": "f09a3f36",
      "displayName": "Planning Actuals Breakdown",
      "layout": [
        {
          "widget": {
            "name": "4432bb91",
            "multilineTextboxSpec": {
              "lines": [
                "## Spend Breakdown\n",
                "\n",
                "This view details actual spend across all suppliers, highlighting key vendors, spend categories, and period-over-period changes. It enables better oversight of procurement activity, supports cost control initiatives, and helps surface opportunities for efficiency and negotiation."
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 10,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "f3fb48b3",
            "multilineTextboxSpec": {
              "lines": [
                "# FP&A Actuals Breakdown\n",
                "\n",
                "This dashboard provides a clear and concise breakdown of actual financial performance across key areas such as revenue, operating expenses, and headcount. It highlights how actuals compare to plan and forecast, helping teams quickly identify where the business is over- or under-performing."
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 0,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "5a9d3d2b",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "4bd0cae7",
                  "fields": [
                    {
                      "name": "sum(total_actual)",
                      "expression": "SUM(`total_actual`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "sum(total_actual)",
                  "format": {
                    "type": "number-currency",
                    "currencyCode": "USD",
                    "abbreviation": "compact",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 2
                    }
                  },
                  "displayName": "Total Actuals YTD ($)"
                }
              },
              "frame": {
                "title": "Recent Full Quarter Actuals ($)",
                "showTitle": true,
                "showDescription": true,
                "description": "Sum of Recent Full Quarter (FY2025 Q3) actual spending."
              }
            }
          },
          "position": {
            "x": 0,
            "y": 2,
            "width": 3,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "071ce937",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "750c65bd",
                  "fields": [
                    {
                      "name": "sum(total_actual)",
                      "expression": "SUM(`total_actual`)"
                    },
                    {
                      "name": "sum(total_spend)",
                      "expression": "SUM(`total_spend`)"
                    },
                    {
                      "name": "sum(total_salary)",
                      "expression": "SUM(`total_salary`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "scale": {
                    "type": "quantitative"
                  },
                  "fields": [
                    {
                      "fieldName": "sum(total_actual)",
                      "displayName": "Actuals"
                    },
                    {
                      "fieldName": "sum(total_spend)",
                      "displayName": "Spend Ops"
                    },
                    {
                      "fieldName": "sum(total_salary)",
                      "displayName": "Salary"
                    }
                  ],
                  "format": {
                    "type": "number-currency",
                    "currencyCode": "USD",
                    "abbreviation": "compact",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 0
                    }
                  }
                },
                "color": {
                  "legend": {
                    "position": "right"
                  }
                },
                "label": {
                  "show": true
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Spend Breakdown",
                "showDescription": true,
                "description": "Recent Quarter (FY2025 Q3) Actuals Breakdown"
              },
              "mark": {
                "layout": "group"
              }
            }
          },
          "position": {
            "x": 3,
            "y": 2,
            "width": 3,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "fc407b55",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "ee443030",
                  "fields": [
                    {
                      "name": "fiscal_quarter_name",
                      "expression": "`fiscal_quarter_name`"
                    },
                    {
                      "name": "sum(total_spend)",
                      "expression": "SUM(`total_spend`)"
                    },
                    {
                      "name": "sum(total_salary)",
                      "expression": "SUM(`total_salary`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "combo",
              "encodings": {
                "x": {
                  "fieldName": "fiscal_quarter_name",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "y": {
                  "primary": {
                    "fields": [
                      {
                        "fieldName": "sum(total_spend)",
                        "displayName": "Spend Ops"
                      },
                      {
                        "fieldName": "sum(total_salary)",
                        "displayName": "Salary"
                      }
                    ]
                  },
                  "secondary": {
                    "fields": [
                      {
                        "fieldName": "sum(total_spend)"
                      }
                    ]
                  },
                  "scale": {
                    "type": "quantitative"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Spend Breakdown",
                "showDescription": true,
                "description": "Actuals spend comparing Spend Operations and Salary Headcount Costs"
              },
              "mark": {
                "colors": [
                  {
                    "themeColorType": "visualizationColors",
                    "position": 2
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 3
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 3
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 4
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 5
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 6
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 7
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 8
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 9
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 10
                  }
                ]
              }
            }
          },
          "position": {
            "x": 0,
            "y": 5,
            "width": 6,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "f232eb50",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "e08f3bac",
                  "fields": [
                    {
                      "name": "is_spend_contracted",
                      "expression": "`is_spend_contracted`"
                    },
                    {
                      "name": "daily(purchase_order_date)",
                      "expression": "DATE_TRUNC(\"DAY\", `purchase_order_date`)"
                    },
                    {
                      "name": "sum(purchase_order_amount)",
                      "expression": "SUM(`purchase_order_amount`)"
                    }
                  ],
                  "filters": [
                    {
                      "expression": "`purchase_year` IN (2025, 2024)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "daily(purchase_order_date)",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "sum(purchase_order_amount)",
                  "scale": {
                    "type": "quantitative"
                  }
                },
                "color": {
                  "fieldName": "is_spend_contracted",
                  "scale": {
                    "type": "categorical"
                  }
                }
              },
              "frame": {
                "title": "Trending purchase amount by purchase order date",
                "showTitle": true
              },
              "annotations": [
                {
                  "type": "vertical-line",
                  "encodings": {
                    "x": {
                      "dataValue": "2025-04-01T00:00:00.000",
                      "dataType": "DATETIME"
                    },
                    "label": {
                      "value": "Q2"
                    }
                  }
                },
                {
                  "type": "vertical-line",
                  "encodings": {
                    "x": {
                      "dataValue": "2025-07-01T00:00:00.000",
                      "dataType": "DATETIME"
                    },
                    "label": {
                      "value": "Q3"
                    }
                  }
                },
                {
                  "type": "vertical-line",
                  "encodings": {
                    "x": {
                      "dataValue": "2025-10-01T00:00:00.000",
                      "dataType": "DATETIME"
                    },
                    "label": {
                      "value": "Q4"
                    }
                  }
                },
                {
                  "type": "vertical-line",
                  "encodings": {
                    "x": {
                      "dataValue": "2025-01-01T00:00:00.000",
                      "dataType": "DATETIME"
                    },
                    "label": {
                      "value": "Q1"
                    }
                  }
                }
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 12,
            "width": 3,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "1dd71b12",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "e08f3bac",
                  "fields": [
                    {
                      "name": "daily(invoice_date)",
                      "expression": "DATE_TRUNC(\"DAY\", `invoice_date`)"
                    },
                    {
                      "name": "sum(invoice_amount)",
                      "expression": "SUM(`invoice_amount`)"
                    }
                  ],
                  "filters": [
                    {
                      "expression": "`invoice_year` IN (2025)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "daily(invoice_date)",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "sum(invoice_amount)",
                  "scale": {
                    "type": "quantitative"
                  },
                  "axis": {
                    "hideTitle": true,
                    "hideGrid": false
                  }
                }
              },
              "frame": {
                "title": "Trending purchase amount by purchase order date",
                "showTitle": true
              },
              "annotations": [
                {
                  "type": "vertical-line",
                  "encodings": {
                    "x": {
                      "dataValue": "2025-01-01T00:00:00.000",
                      "dataType": "DATETIME"
                    },
                    "label": {
                      "value": "Q1"
                    }
                  }
                },
                {
                  "type": "vertical-line",
                  "encodings": {
                    "x": {
                      "dataValue": "2025-04-01T00:00:00.000",
                      "dataType": "DATETIME"
                    },
                    "label": {
                      "value": "Q2"
                    }
                  }
                },
                {
                  "type": "vertical-line",
                  "encodings": {
                    "x": {
                      "dataValue": "2025-07-01T00:00:00.000",
                      "dataType": "DATETIME"
                    },
                    "label": {
                      "value": "Q3"
                    }
                  }
                },
                {
                  "type": "vertical-line",
                  "encodings": {
                    "x": {
                      "dataValue": "2025-10-01T00:00:00.000",
                      "dataType": "DATETIME"
                    },
                    "label": {
                      "value": "Q4"
                    }
                  }
                }
              ],
              "mark": {
                "colors": [
                  {
                    "themeColorType": "visualizationColors",
                    "position": 5
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 2
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 3
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 4
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 5
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 6
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 7
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 8
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 9
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 10
                  }
                ]
              }
            }
          },
          "position": {
            "x": 3,
            "y": 12,
            "width": 3,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "348d91e5",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "e08f3bac",
                  "fields": [
                    {
                      "name": "invoice_category",
                      "expression": "`invoice_category`"
                    },
                    {
                      "name": "sum(purchase_order_amount)",
                      "expression": "SUM(`purchase_order_amount`)"
                    },
                    {
                      "name": "supplier_name",
                      "expression": "`supplier_name`"
                    }
                  ],
                  "filters": [
                    {
                      "expression": "`purchase_year` IN (2025)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "bar",
              "encodings": {
                "x": {
                  "fieldName": "sum(purchase_order_amount)",
                  "scale": {
                    "type": "quantitative"
                  }
                },
                "y": {
                  "fieldName": "supplier_name",
                  "scale": {
                    "type": "categorical",
                    "sort": {
                      "by": "x-reversed"
                    }
                  }
                },
                "color": {
                  "fieldName": "invoice_category",
                  "scale": {
                    "type": "categorical"
                  }
                }
              },
              "frame": {
                "title": "Supplier Spend Breakdown ",
                "showTitle": true
              }
            }
          },
          "position": {
            "x": 0,
            "y": 17,
            "width": 3,
            "height": 10
          }
        },
        {
          "widget": {
            "name": "f7c7990f",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "e08f3bac",
                  "fields": [
                    {
                      "name": "supplier_name",
                      "expression": "`supplier_name`"
                    },
                    {
                      "name": "is_spend_contracted",
                      "expression": "`is_spend_contracted`"
                    },
                    {
                      "name": "sum(purchase_order_amount)",
                      "expression": "SUM(`purchase_order_amount`)"
                    },
                    {
                      "name": "sum(invoice_amount)",
                      "expression": "SUM(`invoice_amount`)"
                    },
                    {
                      "name": "sum(discount_amount)",
                      "expression": "SUM(`discount_amount`)"
                    },
                    {
                      "name": "avg(discount_percentage)",
                      "expression": "AVG(`discount_percentage`)"
                    }
                  ],
                  "filters": [
                    {
                      "expression": "`purchase_year` IN (2025)"
                    }
                  ],
                  "cubeGroupingSets": {
                    "sets": [
                      {
                        "fieldNames": [
                          "supplier_name"
                        ]
                      },
                      {
                        "fieldNames": [
                          "is_spend_contracted"
                        ]
                      }
                    ]
                  },
                  "disaggregated": false,
                  "orders": [
                    {
                      "direction": "ASC",
                      "expression": "`supplier_name`"
                    },
                    {
                      "direction": "ASC",
                      "expression": "`is_spend_contracted`"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "pivot",
              "encodings": {
                "rows": [
                  {
                    "fieldName": "supplier_name"
                  }
                ],
                "columns": [
                  {
                    "fieldName": "is_spend_contracted",
                    "displayTotal": false,
                    "displayName": "Contract Spend?"
                  }
                ],
                "cell": {
                  "type": "multi-cell",
                  "fields": [
                    {
                      "fieldName": "sum(purchase_order_amount)",
                      "cellType": "text",
                      "format": {
                        "type": "number-currency",
                        "currencyCode": "USD",
                        "abbreviation": "none",
                        "decimalPlaces": {
                          "type": "exact",
                          "places": 0
                        },
                        "hideGroupSeparator": false
                      },
                      "displayName": "PO Amount"
                    },
                    {
                      "fieldName": "sum(invoice_amount)",
                      "cellType": "text",
                      "format": {
                        "type": "number-currency",
                        "currencyCode": "USD",
                        "abbreviation": "none",
                        "decimalPlaces": {
                          "type": "exact",
                          "places": 0
                        },
                        "hideGroupSeparator": false
                      },
                      "displayName": "Invoice Amount"
                    },
                    {
                      "fieldName": "sum(discount_amount)",
                      "cellType": "text",
                      "format": {
                        "type": "number-currency",
                        "currencyCode": "USD",
                        "abbreviation": "none",
                        "decimalPlaces": {
                          "type": "exact",
                          "places": 0
                        },
                        "hideGroupSeparator": false
                      },
                      "displayName": "Total Discounts"
                    },
                    {
                      "fieldName": "avg(discount_percentage)",
                      "cellType": "text",
                      "format": {
                        "type": "number-percent",
                        "decimalPlaces": {
                          "type": "exact",
                          "places": 1
                        },
                        "hideGroupSeparator": true
                      },
                      "displayName": "Avg. Discount %"
                    }
                  ]
                }
              },
              "frame": {
                "title": "Trending purchase amount by purchase order date",
                "showTitle": true
              }
            }
          },
          "position": {
            "x": 3,
            "y": 17,
            "width": 3,
            "height": 10
          }
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    },
    {
      "name": "a8ee49a7",
      "displayName": "GL Activity",
      "layout": [
        {
          "widget": {
            "name": "00e218b1",
            "multilineTextboxSpec": {
              "lines": [
                "# Trial Balance Flux\n",
                "\n",
                "Comprehensive view of Accounts Payable activity including current balances, payment trends, and quarterly supplier flux analysis. This dashboard provides insights into supplier relationships, payment patterns, and outstanding obligations across all legal entities and cost centers."
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 0,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "31f95522",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "4273b056",
                  "fields": [
                    {
                      "name": "sum(total_ap_balance)",
                      "expression": "SUM(`total_ap_balance`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "sum(total_ap_balance)",
                  "format": {
                    "type": "number-currency",
                    "currencyCode": "USD",
                    "abbreviation": "compact",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 2
                    }
                  },
                  "displayName": "Current AP Balance"
                }
              },
              "frame": {
                "title": "Current AP Balance",
                "showTitle": true,
                "showDescription": true,
                "description": "Total Accounts Payable balance as of the most recent trial balance date. Represents the sum of all outstanding vendor obligations across all legal entities."
              }
            }
          },
          "position": {
            "x": 0,
            "y": 2,
            "width": 2,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "6d870eb5",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "df3fcb4a",
                  "fields": [
                    {
                      "name": "sum(supplier_count)",
                      "expression": "SUM(`supplier_count`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "sum(supplier_count)",
                  "displayName": "Active Suppliers (Last 90 Days)"
                }
              },
              "frame": {
                "title": "Active Suppliers (Last 90 Days)",
                "showTitle": true,
                "showDescription": true,
                "description": "Count of distinct suppliers with AP activity in the trailing 90-day period. Indicates breadth of vendor relationships and supply chain diversity."
              }
            }
          },
          "position": {
            "x": 4,
            "y": 2,
            "width": 2,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "15d18fbb",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "6232aeab",
                  "fields": [
                    {
                      "name": "sum(total_payments)",
                      "expression": "SUM(`total_payments`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 2,
              "widgetType": "counter",
              "encodings": {
                "value": {
                  "fieldName": "sum(total_payments)",
                  "format": {
                    "type": "number-currency",
                    "currencyCode": "USD",
                    "abbreviation": "compact",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 2
                    }
                  },
                  "displayName": "Total Payments (Last 30 Days)"
                }
              },
              "frame": {
                "title": "Total Payments (Last 30 Days)",
                "showTitle": true,
                "showDescription": true,
                "description": "Sum of all AP payments made in the trailing 30-day period. Reflects recent cash outflow to suppliers and payment velocity."
              }
            }
          },
          "position": {
            "x": 2,
            "y": 2,
            "width": 2,
            "height": 3
          }
        },
        {
          "widget": {
            "name": "a1001fb7",
            "multilineTextboxSpec": {
              "lines": [
                "## AP Balance Trends & Payment Activity\n",
                "Quarterly AP balance progression and monthly payment patterns across legal entities. Rising balances may indicate extended payment terms or increased purchasing volume, while declining balances suggest accelerated payments or reduced procurement.\n"
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 5,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "76dbd061",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "940a615f",
                  "fields": [
                    {
                      "name": "monthly(as_of_date)",
                      "expression": "DATE_TRUNC(\"MONTH\", `as_of_date`)"
                    },
                    {
                      "name": "sum(ap_balance)",
                      "expression": "SUM(`ap_balance`)"
                    },
                    {
                      "name": "sum(flux)",
                      "expression": "SUM(`flux`)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 1,
              "widgetType": "combo",
              "encodings": {
                "x": {
                  "fieldName": "monthly(as_of_date)",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "primary": {
                    "fields": [
                      {
                        "fieldName": "sum(ap_balance)",
                        "displayName": "AP Balance ($)"
                      }
                    ],
                    "scale": {
                      "type": "quantitative"
                    },
                    "format": {
                      "type": "number-currency",
                      "currencyCode": "USD",
                      "abbreviation": "compact",
                      "decimalPlaces": {
                        "type": "max",
                        "places": 0
                      }
                    }
                  },
                  "secondary": {
                    "fields": [
                      {
                        "fieldName": "sum(flux)",
                        "displayName": "AP Flux"
                      }
                    ],
                    "scale": {
                      "type": "quantitative"
                    },
                    "format": {
                      "type": "number-currency",
                      "currencyCode": "USD",
                      "abbreviation": "compact",
                      "decimalPlaces": {
                        "type": "max",
                        "places": 0
                      }
                    }
                  }
                }
              },
              "frame": {
                "title": "Period AP Balance Trend by Legal Entity",
                "showTitle": true,
                "description": "Tracks the ending AP balance for each quarter segmented by legal entity. Upward trends may signal increasing procurement activity or extended Days Payable Outstanding (DPO), while downward trends suggest improved working capital management or reduced purchasing."
              },
              "mark": {
                "colors": [
                  {
                    "themeColorType": "visualizationColors",
                    "position": 1
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 8
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 3
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 4
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 5
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 6
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 7
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 8
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 9
                  },
                  {
                    "themeColorType": "visualizationColors",
                    "position": 10
                  }
                ]
              }
            }
          },
          "position": {
            "x": 0,
            "y": 7,
            "width": 3,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "96534292",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "e08f3bac",
                  "fields": [
                    {
                      "name": "linear_payment",
                      "expression": "`linear_payment`"
                    },
                    {
                      "name": "monthly(payment_date)",
                      "expression": "DATE_TRUNC(\"MONTH\", `payment_date`)"
                    },
                    {
                      "name": "sum(invoice_amount)",
                      "expression": "SUM(`invoice_amount`)"
                    }
                  ],
                  "filters": [
                    {
                      "expression": "`linear_payment` IS NOT NULL"
                    },
                    {
                      "expression": "`invoice_year` IN (2024, 2025, 2026)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "line",
              "encodings": {
                "x": {
                  "fieldName": "monthly(payment_date)",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "fieldName": "sum(invoice_amount)",
                  "scale": {
                    "type": "quantitative"
                  },
                  "format": {
                    "type": "number-currency",
                    "currencyCode": "USD",
                    "abbreviation": "compact",
                    "decimalPlaces": {
                      "type": "max",
                      "places": 0
                    }
                  }
                },
                "color": {
                  "fieldName": "linear_payment",
                  "scale": {
                    "type": "categorical",
                    "mappings": [
                      {
                        "value": true,
                        "color": {
                          "themeColorType": "visualizationColors",
                          "position": 1
                        }
                      },
                      {
                        "value": false,
                        "color": {
                          "themeColorType": "visualizationColors",
                          "position": 10
                        }
                      }
                    ]
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "showDescription": true,
                "title": "Linear Payments Analysis",
                "description": "Analysis of payments made in same quarter invoice was issued"
              }
            }
          },
          "position": {
            "x": 3,
            "y": 7,
            "width": 3,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "9a06c7b3",
            "multilineTextboxSpec": {
              "lines": [
                "## Supplier Concentration & Flux Analysis\n",
                "Quarterly supplier activity trends and concentration metrics. Monitor supplier diversity, identify dependencies on key vendors, and track supplier churn to assess supply chain risk and vendor relationship health.\n"
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 17,
            "width": 6,
            "height": 2
          }
        },
        {
          "widget": {
            "name": "f503727f",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "e08f3bac",
                  "fields": [
                    {
                      "name": "monthly(payment_quarter)",
                      "expression": "DATE_TRUNC(\"MONTH\", `payment_quarter`)"
                    },
                    {
                      "name": "min(days_to_payment)",
                      "expression": "MIN(`days_to_payment`)"
                    },
                    {
                      "name": "q1(days_to_payment)",
                      "expression": "PERCENTILE(`days_to_payment`, 0.25)"
                    },
                    {
                      "name": "median(days_to_payment)",
                      "expression": "MEDIAN(`days_to_payment`)"
                    },
                    {
                      "name": "q3(days_to_payment)",
                      "expression": "PERCENTILE(`days_to_payment`, 0.75)"
                    },
                    {
                      "name": "max(days_to_payment)",
                      "expression": "MAX(`days_to_payment`)"
                    }
                  ],
                  "filters": [
                    {
                      "expression": "`invoice_year` IN (2026, 2025, 2024)"
                    }
                  ],
                  "disaggregated": false
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "box",
              "encodings": {
                "x": {
                  "fieldName": "monthly(payment_quarter)",
                  "scale": {
                    "type": "temporal"
                  }
                },
                "y": {
                  "whiskerStart": {
                    "fieldName": "min(days_to_payment)"
                  },
                  "boxStart": {
                    "fieldName": "q1(days_to_payment)"
                  },
                  "boxMid": {
                    "fieldName": "median(days_to_payment)"
                  },
                  "boxEnd": {
                    "fieldName": "q3(days_to_payment)"
                  },
                  "whiskerEnd": {
                    "fieldName": "max(days_to_payment)"
                  },
                  "scale": {
                    "type": "quantitative"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Payment Cycle Time\n"
              }
            }
          },
          "position": {
            "x": 3,
            "y": 12,
            "width": 3,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "e17125e0",
            "multilineTextboxSpec": {
              "lines": [
                "Payments directly reduce the Accounts Payable (AP) trial balance by settling outstanding liabilities. When an invoice is paid, the corresponding payable entry is cleared, decreasing total AP and improving the companys short-term obligations position. The timing and volume of payments therefore drive linear movements in the AP balance  higher payment activity lowers the balance, while slower disbursements cause it to rise."
              ]
            }
          },
          "position": {
            "x": 0,
            "y": 12,
            "width": 3,
            "height": 5
          }
        },
        {
          "widget": {
            "name": "b1041314",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "940a615f",
                  "fields": [
                    {
                      "name": "third_party_name",
                      "expression": "`third_party_name`"
                    },
                    {
                      "name": "monthly(as_of_date)",
                      "expression": "DATE_TRUNC(\"MONTH\", `as_of_date`)"
                    },
                    {
                      "name": "sum(flux)",
                      "expression": "SUM(`flux`)"
                    }
                  ],
                  "filters": [
                    {
                      "expression": "`as_of_date` IN (DATE'2025-09-30T00:00:00.000', DATE'2025-06-30T00:00:00.000', DATE'2025-03-31T00:00:00.000', DATE'2024-12-31T00:00:00.000', DATE'2024-09-30T00:00:00.000', DATE'2025-08-31T00:00:00.000', DATE'2025-07-31T00:00:00.000')"
                    }
                  ],
                  "cubeGroupingSets": {
                    "sets": [
                      {
                        "fieldNames": [
                          "third_party_name"
                        ]
                      },
                      {
                        "fieldNames": [
                          "monthly(as_of_date)"
                        ]
                      }
                    ]
                  },
                  "disaggregated": false,
                  "orders": [
                    {
                      "direction": "ASC",
                      "expression": "`third_party_name`"
                    },
                    {
                      "direction": "ASC",
                      "expression": "DATE_TRUNC(\"MONTH\", `as_of_date`)"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "version": 3,
              "widgetType": "pivot",
              "encodings": {
                "rows": [
                  {
                    "fieldName": "third_party_name"
                  }
                ],
                "columns": [
                  {
                    "fieldName": "monthly(as_of_date)",
                    "displayTotal": false
                  }
                ],
                "cell": {
                  "type": "multi-cell",
                  "fields": [
                    {
                      "fieldName": "sum(flux)",
                      "cellType": "text",
                      "format": {
                        "type": "number-currency",
                        "currencyCode": "USD",
                        "abbreviation": "none",
                        "decimalPlaces": {
                          "type": "exact",
                          "places": 0
                        },
                        "hideGroupSeparator": false
                      }
                    }
                  ]
                }
              },
              "frame": {
                "title": "AP balance by Third Party\n",
                "showTitle": true
              }
            }
          },
          "position": {
            "x": 0,
            "y": 19,
            "width": 6,
            "height": 8
          }
        }
      ],
      "pageType": "PAGE_TYPE_CANVAS"
    }
  ],
  "uiSettings": {
    "theme": {
      "widgetHeaderAlignment": "ALIGNMENT_UNSPECIFIED"
    },
    "genieSpace": {
      "isEnabled": false
    }
  }
}
